# 魔塔 24 层 Godot 复刻版

## 项目简介
本项目是经典策略 RPG 游戏《魔塔》（24 层版本）的 Godot 4 复刻版本。旨在通过现代游戏引擎还原经典玩法，并提供更流畅的交互体验和可扩展的架构。

## 技术规格
- **引擎版本**: Godot 4.5.1 (Mobile 渲染模式)
- **开发语言**: GDScript
- **分辨率**: 576x416 (适配经典比例)

## 目录结构说明

### 📂 `Sprite/` - 怪物与实体
存储所有敌人的场景文件 (`.tscn`)。
- `enemy.gd`: 敌人的核心逻辑基类，包含战斗伤害计算、掉落结算、特殊属性（吸血、固伤）处理等。
- `*.tscn`: 各种怪物的实例化场景，如 `dark_god.tscn` (魔神), `white_knight.tscn` (白骑士) 等。

### 📂 `map/` - 楼层地图
存储 0 到 24 层的场景文件。
- `map*.tscn`: 每一层的瓦片地图布局、NPC 放置和触发器设置。
- `map*.gd`: 部分特殊楼层的逻辑脚本（如特定剧情触发）。

### 📂 `npc/` - NPC 与道具
包含非玩家角色、门、道具等交互实体。
- `item.gd`: 道具基类，处理拾取属性加成。
- `door_*.gd`: 处理各类门（黄、蓝、红、栅栏）的消耗钥匙逻辑与动画。
- `floor_up.gd`: 楼层切换传送门的逻辑。
- `ui/`: **核心 UI 系统**
    - `monster_book_ui.tscn`: 怪物手册，支持动态显示特殊属性（吸血、固伤）并实时计算伤害。
    - `shop_*.tscn`: 各类商店（金币商店、经验商店、钥匙商店）。
    - `dialogue_ui.tscn`: 剧情对话系统。
    - `save_load_ui.tscn`: 存档与读档界面。
    - `setting_ui.tscn`: 系统设置（音量调节、重新开始、退出）。

### 📂 `images/` - 图像资源
存放游戏中所有的图片资源。
- `enemys.png`: 怪物图集。
- `items.png`: 道具图集。
- `hero.png`: 勇者精灵图。
- `animates.png`: 动态物体（门、特效）图集。

### 📂 `sounds/` - 音效与音乐
存放背景音乐和音效。
- `bgm.mp3`: 全局背景音乐。
- `attack.ogg`: 战斗攻击音效。
- `door.ogg`: 开门音效。
- `item.ogg`: 拾取物品音效。
- `floor.mp3`: 切换楼层音效。

### 📂 根目录核心文件
- `Global.gd`: 全局单例 (Autoload)，管理玩家属性、已击败怪物记录、全局配置、音效播放及存档读档逻辑。
- `player.gd`: 玩家移动、交互及射线检测逻辑。
- `hud.gd`: 游戏主界面状态栏，实时显示玩家属性。
- `main_menu.gd`: 主菜单逻辑。
- `project.godot`: 项目配置文件。

## 核心功能亮点
- **动态伤害计算**: 怪物手册实时根据玩家当前攻防计算预期伤害，并完美支持吸血、固伤等特殊机制。
- **全局音效管理**: 支持设置界面实时调节 BGM 和 SFX 音量。
- **存档系统**: 楼层切换自动存档，支持 23-24 层特殊区域禁用存档以符合经典规则。
- **现代化交互**: 商店支持鼠标点击/悬停交互，支持快捷键退出。

## 开发记录
- 基于 GitHub 仓库 `dependon/magic-tower-godot` 进行复刻与持续更新。
